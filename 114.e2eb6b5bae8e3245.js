"use strict";(self.webpackChunkfrontend_mentor_interactive_comments=self.webpackChunkfrontend_mentor_interactive_comments||[]).push([[114],{1114:(Ce,h,d)=>{d.r(h),d.d(h,{CommentsModule:()=>fe});var l=d(9808),C=d(1196),M=d(9300);function x(n){return(0,M.h)((i,t)=>n<=t)}var e=d(1223),A=d(2340),k=d(520);let E=(()=>{class n{constructor(t){this.httpClient=t,this.baseUrl=A.N.api}getComments(){return this.httpClient.get(this.baseUrl+"comments")}getCurrentUser(){return this.httpClient.get(this.baseUrl+"currentUser")}editComment(t){return this.httpClient.put(this.baseUrl+`comments/${t.id}`,t)}addComment(t){return this.httpClient.post(this.baseUrl+"comments/",t)}deleteComment(t){return this.httpClient.delete(this.baseUrl+`comments/${t.id}`)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(k.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var v=d(1135);let S=(()=>{class n{constructor(){this.comments$=new v.X([]),this.currentUser$=new v.X(null)}getComments(){return this.comments$.asObservable()}updateComments(t){this.comments$.next([...t])}addComment(t){const o=this.comments$.getValue();o.push(t),this.comments$.next([...o])}deleteComment(t){const o=this.comments$.getValue(),r=o.findIndex(s=>s.id===t.id);o.splice(r,1),this.comments$.next([...o])}updateSingleComment(t){const o=this.comments$.getValue(),r=o.findIndex(s=>s.id===t.id);o[r]=Object.assign({},t),this.comments$.next([...o])}getCurrentUser$(){return this.currentUser$.asObservable()}setCurrentUser(t){this.currentUser$.next(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),q=(()=>{class n{constructor(t,o){this.api=t,this.states=o}loadComments(){this.api.getComments().subscribe(t=>{this.states.updateComments(t)})}getComments(){return this.states.getComments()}addComment(t){this.api.addComment(t).subscribe(()=>{this.states.addComment(t)})}editComment(t){this.api.editComment(t).subscribe(()=>{this.states.updateSingleComment(t)})}deleteComment(t){this.api.deleteComment(t).subscribe(()=>{this.states.deleteComment(t)})}reply(t){var o,r;void 0===(null===(o=t.replyTo)||void 0===o?void 0:o.replies)&&(t.replyTo.replies=[]),null===(r=t.replyTo)||void 0===r||r.replies.push({id:t.id,user:t.user,replies:[],content:t.content,score:t.score,createdAt:t.createdAt,replyingTo:t.replyingTo}),this.editComment(t.replyTo)}getCurrentUser$(){return this.states.getCurrentUser$()}loadCurrentUser(){this.api.getCurrentUser().subscribe(t=>{this.states.setCurrentUser(t)})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(E),e.LFG(S))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const a="undefined"!=typeof performance&&void 0!==performance.now&&"function"==typeof performance.mark&&"function"==typeof performance.measure&&("function"==typeof performance.clearMarks||"function"==typeof performance.clearMeasures),J="undefined"!=typeof PerformanceObserver&&void 0!==PerformanceObserver.prototype&&"function"==typeof PerformanceObserver.prototype.constructor,u="[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0);let p={},m={};const g=()=>a?performance.now():Date.now(),y=n=>{p[n]=void 0,m[n]&&(m[n]=void 0),a&&(u||performance.clearMeasures(n),performance.clearMarks(n))},b=n=>{if(a){if(u&&J){const i=new PerformanceObserver(t=>{m[n]=t.getEntries().find(o=>o.name===n),i.disconnect()});i.observe({entryTypes:["measure"]})}performance.mark(n)}p[n]=g()},Z=(n,i)=>{try{const t=p[n];return a?(i||performance.mark(`${n}-end`),performance.measure(n,n,i||`${n}-end`),u?m[n]?m[n]:t?{duration:g()-t,startTime:t,entryType:"measure",name:n}:{}:performance.getEntriesByName(n).pop()||{}):t?{duration:g()-t,startTime:t,entryType:"measure",name:n}:{}}catch(t){return{}}finally{y(n),y(i||`${n}-end`)}},O=function(n,i,t,o){return{circle:n,progress:i,"progress-dark":t,pulse:o}};function R(n,i){if(1&n&&e._UZ(0,"span",1),2&n){const t=e.oxw();e.Q6J("ngClass",e.l5B(4,O,"circle"===t.appearance,"progress"===t.animation,"progress-dark"===t.animation,"pulse"===t.animation))("ngStyle",t.theme),e.uIk("aria-label",t.ariaLabel)("aria-valuetext",t.loadingText)}}const T=new e.OlP("ngx-skeleton-loader.config");let _=(()=>{class n{constructor(t){const{appearance:o="line",animation:r="progress",theme:s=null,loadingText:f="Loading...",count:U=1,ariaLabel:he="loading"}=t||{};this.appearance=o,this.animation=r,this.theme=s,this.loadingText=f,this.count=U,this.items=[],this.ariaLabel=he}ngOnInit(){b("NgxSkeletonLoader:Rendered"),b("NgxSkeletonLoader:Loaded"),this.validateInputValues()}validateInputValues(){/^\d+$/.test(`${this.count}`)||((0,e.X6Q)()&&console.error("`NgxSkeletonLoaderComponent` need to receive 'count' a numeric value. Forcing default to \"1\"."),this.count=1),this.items.length=this.count;const t=["progress","progress-dark","pulse","false"];-1===t.indexOf(String(this.animation))&&((0,e.X6Q)()&&console.error(`\`NgxSkeletonLoaderComponent\` need to receive 'animation' as: ${t.join(", ")}. Forcing default to "progress".`),this.animation="progress"),-1===["circle","line",""].indexOf(String(this.appearance))&&((0,e.X6Q)()&&console.error("`NgxSkeletonLoaderComponent` need to receive 'appearance' as: circle or line or empty string. Forcing default to \"''\"."),this.appearance="")}ngOnChanges(t){["count","animation","appearance"].find(o=>t[o]&&(t[o].isFirstChange()||t[o].previousValue===t[o].currentValue))||this.validateInputValues()}ngAfterViewInit(){Z("NgxSkeletonLoader:Rendered")}ngOnDestroy(){Z("NgxSkeletonLoader:Loaded")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(T,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ngx-skeleton-loader"]],inputs:{appearance:"appearance",animation:"animation",theme:"theme",loadingText:"loadingText",count:"count",ariaLabel:"ariaLabel"},features:[e.TTD],decls:1,vars:1,consts:[["class","loader","aria-busy","true","aria-valuemin","0","aria-valuemax","100","role","progressbar","tabindex","0",3,"ngClass","ngStyle",4,"ngFor","ngForOf"],["aria-busy","true","aria-valuemin","0","aria-valuemax","100","role","progressbar","tabindex","0",1,"loader",3,"ngClass","ngStyle"]],template:function(t,o){1&t&&e.YNc(0,R,1,9,"span",0),2&t&&e.Q6J("ngForOf",o.items)},directives:[l.sg,l.mk,l.PC],styles:['.loader[_ngcontent-%COMP%]{background:#eff1f6 no-repeat;border-radius:4px;box-sizing:border-box;display:inline-block;height:20px;margin-bottom:10px;overflow:hidden;position:relative;width:100%;will-change:transform}.loader[_ngcontent-%COMP%]:after, .loader[_ngcontent-%COMP%]:before{box-sizing:border-box}.loader.circle[_ngcontent-%COMP%]{border-radius:50%;height:40px;margin:5px;width:40px}.loader.progress[_ngcontent-%COMP%], .loader.progress-dark[_ngcontent-%COMP%]{transform:translateZ(0)}.loader.progress-dark[_ngcontent-%COMP%]:after, .loader.progress-dark[_ngcontent-%COMP%]:before, .loader.progress[_ngcontent-%COMP%]:after, .loader.progress[_ngcontent-%COMP%]:before{box-sizing:border-box}.loader.progress-dark[_ngcontent-%COMP%]:before, .loader.progress[_ngcontent-%COMP%]:before{-webkit-animation:progress 2s ease-in-out infinite;animation:progress 2s ease-in-out infinite;background-size:200px 100%;content:"";height:100%;left:0;position:absolute;top:0;width:200px;z-index:1}.loader.progress[_ngcontent-%COMP%]:before{background-image:linear-gradient(90deg,hsla(0,0%,100%,0),hsla(0,0%,100%,.6),hsla(0,0%,100%,0))}.loader.progress-dark[_ngcontent-%COMP%]:before{background-image:linear-gradient(90deg,transparent,rgba(0,0,0,.2),transparent)}.loader.pulse[_ngcontent-%COMP%]{-webkit-animation:pulse 1.5s cubic-bezier(.4,0,.2,1) infinite;-webkit-animation-delay:.5s;animation:pulse 1.5s cubic-bezier(.4,0,.2,1) infinite;animation-delay:.5s}@media (prefers-reduced-motion:reduce){.loader.progress[_ngcontent-%COMP%], .loader.progress-dark[_ngcontent-%COMP%], .loader.pulse[_ngcontent-%COMP%]{-webkit-animation:none;animation:none}.loader.progress[_ngcontent-%COMP%], .loader.progress-dark[_ngcontent-%COMP%]{background-image:none}}@-webkit-keyframes progress{0%{transform:translate3d(-200px,0,0)}to{transform:translate3d(calc(200px + 100vw),0,0)}}@keyframes progress{0%{transform:translate3d(-200px,0,0)}to{transform:translate3d(calc(200px + 100vw),0,0)}}@-webkit-keyframes pulse{0%{opacity:1}50%{opacity:.4}to{opacity:1}}@keyframes pulse{0%{opacity:1}50%{opacity:.4}to{opacity:1}}'],changeDetection:0}),n})(),D=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:T,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[l.ez]]}),n})();var c=d(2382);function I(n,i){if(1&n&&(e.TgZ(0,"div",9),e._UZ(1,"img",10),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("src",null==t.currentUser||null==t.currentUser.image?null:t.currentUser.image.png,e.LSH)}}function N(n,i){if(1&n&&(e.TgZ(0,"div",11),e._UZ(1,"img",10),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("src",null==t.currentUser||null==t.currentUser.image?null:t.currentUser.image.png,e.LSH)}}const F=function(){return{height:"36px",width:"36px","margin-left":"-2px"}};function Q(n,i){1&n&&e._UZ(0,"ngx-skeleton-loader",12),2&n&&e.Q6J("theme",e.DdM(1,F))}let L=(()=>{class n{constructor(){this.replyEvent=new e.vpe}ngOnInit(){}reply(){this.comment={score:0,createdAt:"Just now",user:this.currentUser,replies:[],content:this.content,id:Math.round(500*(Math.random()+1)),replyTo:this.replyTo,replyingTo:this.replyingTo},this.replyEvent.emit(this.comment),this.content=""}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-reply-comment"]],inputs:{currentUser:"currentUser",replyTo:"replyTo",replyingTo:"replyingTo"},outputs:{replyEvent:"replyEvent"},decls:11,vars:6,consts:[[1,"bg-white","border-slate-100","border-2","rounded-lg","p-3"],[1,"flex","justify-between"],["class","hidden md:block w-9 mr-3",4,"ngIf"],["placeholder","Add a comment...","name","addComment","id","addComment","rows","3",1,"w-full","rounded-md","border","border-slate-200","hover:border-black","p-2","resize-none",3,"ngModel","ngModelChange"],[1,"hidden","md:block","ml-3","px-8","py-3","h-12","bg-indigo-500","hover:bg-indigo-500/50","disabled:bg-indigo-500/50","text-white","font-black","rounded-lg",3,"disabled","click"],[1,"flex","justify-between","items-center","mt-3"],["class","w-8 md:hidden",4,"ngIf"],["count","1","appearance","circle",3,"theme",4,"ngIf"],[1,"md:hidden","px-8","py-3","bg-indigo-500","hover:bg-indigo-500/50","disabled:bg-indigo-500/50","text-white","font-black","rounded-lg",3,"disabled","click"],[1,"hidden","md:block","w-9","mr-3"],["alt","avatar image",1,"w-full","h-auto",3,"src"],[1,"w-8","md:hidden"],["count","1","appearance","circle",3,"theme"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.YNc(2,I,2,1,"div",2),e.TgZ(3,"textarea",3),e.NdJ("ngModelChange",function(s){return o.content=s}),e.qZA(),e.TgZ(4,"button",4),e.NdJ("click",function(){return o.reply()}),e._uU(5,"REPLY"),e.qZA(),e.qZA(),e.TgZ(6,"div",5),e.YNc(7,N,2,1,"div",6),e.YNc(8,Q,1,2,"ngx-skeleton-loader",7),e.TgZ(9,"button",8),e.NdJ("click",function(){return o.reply()}),e._uU(10,"REPLY"),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngIf",o.currentUser),e.xp6(1),e.Q6J("ngModel",o.content),e.xp6(1),e.Q6J("disabled",!o.currentUser),e.xp6(3),e.Q6J("ngIf",o.currentUser),e.xp6(1),e.Q6J("ngIf",!o.currentUser),e.xp6(1),e.Q6J("disabled",!o.currentUser))},directives:[l.O5,c.Fj,c.JJ,c.On,_],encapsulation:2}),n})();function $(n,i){1&n&&(e.TgZ(0,"div",33),e._uU(1,"you"),e.qZA())}function H(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",34),e.O4$(),e.TgZ(1,"svg",35),e._UZ(2,"path",36),e.qZA(),e.kcU(),e.TgZ(3,"span",37),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return r.toggleReplyMode(r.comment.user.username)}),e._uU(4,"Reply"),e.qZA(),e.qZA()}}function P(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",38),e.TgZ(1,"div",39),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).toggleEditMode()}),e.O4$(),e.TgZ(2,"svg",40),e._UZ(3,"path",41),e.qZA(),e.kcU(),e.TgZ(4,"span",42),e._uU(5,"Edit"),e.qZA(),e.qZA(),e.TgZ(6,"div",43),e.O4$(),e.TgZ(7,"svg",44),e._UZ(8,"path",45),e.qZA(),e.kcU(),e.TgZ(9,"span",46),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return r.isReply?r.emitDeleteReply():r.deleteComment()}),e._uU(10,"Delete"),e.qZA(),e.qZA(),e.qZA()}}function j(n,i){if(1&n&&(e.TgZ(0,"span",42),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.hij("@",t.comment.replyingTo," ")}}function Y(n,i){if(1&n&&(e.TgZ(0,"p",47),e.YNc(1,j,2,1,"span",48),e._uU(2),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.comment.replyingTo),e.xp6(1),e.Oqu(t.comment.content)}}function z(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"textarea",49),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw(2).comment.content=r}),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("ngModel",t.comment.content)}}function V(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",50),e.TgZ(1,"button",51),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return r.isReply?r.emitEditReply():r.editComment()}),e._uU(2,"UPDATE"),e.qZA(),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("disabled",!t.currentUser)}}function X(n,i){if(1&n){const t=e.EpF();e.O4$(),e.kcU(),e.TgZ(0,"div",34),e.O4$(),e.TgZ(1,"svg",35),e._UZ(2,"path",36),e.qZA(),e.kcU(),e.TgZ(3,"span",37),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return r.toggleReplyMode(r.comment.user.username)}),e._uU(4,"Reply"),e.qZA(),e.qZA()}}function B(n,i){if(1&n){const t=e.EpF();e.O4$(),e.kcU(),e.TgZ(0,"div",52),e.TgZ(1,"div",39),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).toggleEditMode()}),e.O4$(),e.TgZ(2,"svg",40),e._UZ(3,"path",41),e.qZA(),e.kcU(),e.TgZ(4,"span",42),e._uU(5,"Edit"),e.qZA(),e.qZA(),e.TgZ(6,"div",53),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return r.isReply?r.emitDeleteReply():r.deleteComment()}),e.O4$(),e.TgZ(7,"svg",44),e._UZ(8,"path",45),e.qZA(),e.kcU(),e.TgZ(9,"span",54),e._uU(10,"Delete"),e.qZA(),e.qZA(),e.qZA()}}function G(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",4),e.TgZ(1,"div",5),e.TgZ(2,"div",6),e.TgZ(3,"div",7),e.NdJ("click",function(){return e.CHM(t),e.oxw().increaseScore()}),e.O4$(),e.TgZ(4,"svg",8),e._UZ(5,"path",9),e.qZA(),e.qZA(),e.kcU(),e.TgZ(6,"span",10),e._uU(7),e.qZA(),e.TgZ(8,"div",11),e.NdJ("click",function(){return e.CHM(t),e.oxw().decreaseScore()}),e.O4$(),e.TgZ(9,"svg",12),e._UZ(10,"path",13),e.qZA(),e.qZA(),e.qZA(),e.kcU(),e.TgZ(11,"div",14),e.TgZ(12,"div",15),e.TgZ(13,"div",16),e.TgZ(14,"div",17),e._UZ(15,"img",18),e.qZA(),e.TgZ(16,"div",19),e._uU(17),e.qZA(),e.YNc(18,$,2,0,"div",20),e.TgZ(19,"span",21),e._uU(20),e.qZA(),e.qZA(),e.TgZ(21,"div",22),e.YNc(22,H,5,0,"div",23),e.YNc(23,P,11,0,"div",24),e.qZA(),e.qZA(),e.YNc(24,Y,3,2,"p",25),e.YNc(25,z,1,1,"textarea",26),e.YNc(26,V,3,1,"div",27),e.TgZ(27,"div",28),e.TgZ(28,"div",29),e.TgZ(29,"div",30),e.NdJ("click",function(){return e.CHM(t),e.oxw().increaseScore()}),e.O4$(),e.TgZ(30,"svg",8),e._UZ(31,"path",9),e.qZA(),e.qZA(),e.kcU(),e.TgZ(32,"span",10),e._uU(33),e.qZA(),e.TgZ(34,"div",31),e.NdJ("click",function(){return e.CHM(t),e.oxw().decreaseScore()}),e.O4$(),e.TgZ(35,"svg",12),e._UZ(36,"path",13),e.qZA(),e.qZA(),e.qZA(),e.YNc(37,X,5,0,"div",23),e.YNc(38,B,11,0,"div",32),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(7),e.Oqu(t.comment.score),e.xp6(8),e.Q6J("src",t.comment.user.image.png,e.LSH),e.xp6(2),e.hij(" ",t.comment.user.username," "),e.xp6(1),e.Q6J("ngIf",(null==t.currentUser?null:t.currentUser.username)===t.comment.user.username),e.xp6(2),e.hij(" ",t.comment.createdAt," "),e.xp6(2),e.Q6J("ngIf",(null==t.currentUser?null:t.currentUser.username)!==t.comment.user.username),e.xp6(1),e.Q6J("ngIf",(null==t.currentUser?null:t.currentUser.username)===t.comment.user.username),e.xp6(1),e.Q6J("ngIf",!t.editMode),e.xp6(1),e.Q6J("ngIf",t.editMode),e.xp6(1),e.Q6J("ngIf",t.editMode),e.xp6(7),e.Oqu(t.comment.score),e.xp6(4),e.Q6J("ngIf",(null==t.currentUser?null:t.currentUser.username)!==t.comment.user.username),e.xp6(1),e.Q6J("ngIf",(null==t.currentUser?null:t.currentUser.username)===t.comment.user.username)}}function K(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"app-single-comment",55),e.NdJ("editReplyEvent",function(r){return e.CHM(t),e.oxw().editReply(r)})("deleteReplyEvent",function(r){return e.CHM(t),e.oxw().deleteReply(r)})("replyEvent",function(r){return e.CHM(t),e.oxw().reply(r)}),e.qZA()}if(2&n){const t=i.$implicit,o=e.oxw();e.Q6J("comment",t)("currentUser",o.currentUser)("isReply",!0)}}function W(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",56),e.TgZ(1,"app-reply-comment",57),e.NdJ("replyEvent",function(r){return e.CHM(t),e.oxw().reply(r)}),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("replyingTo",t.replyingTo)("replyTo",t.comment)("currentUser",t.currentUser)}}let ee=(()=>{class n{constructor(){this.editCommentEvent=new e.vpe,this.editReplyEvent=new e.vpe,this.deleteReplyEvent=new e.vpe,this.deleteCommentEvent=new e.vpe,this.replyEvent=new e.vpe,this.editMode=!1,this.replyMode=!1,this.replyingTo=void 0}ngOnInit(){}toggleEditMode(){this.editMode=!this.editMode}toggleReplyMode(t){this.replyMode=!this.replyMode,this.replyingTo=this.replyMode?t:void 0}editComment(){this.editCommentEvent.emit(this.comment),this.editMode=!1}deleteComment(){this.deleteCommentEvent.emit(this.comment)}deleteReply(t){this.deleteReplyEvent.emit([t[0],this.comment])}editReply(t){const o=this.comment.replies.findIndex(r=>r.id===t.id);this.comment.replies[o]=t,this.editComment()}reply(t){this.replyMode=!1,this.replyEvent.emit(t)}emitEditReply(){this.editReplyEvent.emit(this.comment),this.editMode=!1}emitDeleteReply(){this.deleteReplyEvent.emit([this.comment])}increaseScore(){this.comment.score++,this.isReply?this.emitEditReply():this.editComment()}decreaseScore(){this.comment.score--,this.isReply?this.emitEditReply():this.editComment()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-single-comment"]],inputs:{comment:"comment",currentUser:"currentUser",isReply:"isReply"},outputs:{editCommentEvent:"editCommentEvent",editReplyEvent:"editReplyEvent",deleteReplyEvent:"deleteReplyEvent",deleteCommentEvent:"deleteCommentEvent",replyEvent:"replyEvent"},decls:4,vars:3,consts:[["class","bg-white border-slate-100 border-2 rounded-lg p-3",4,"ngIf"],[1,"pl-3","border-l-2","border-slate-200","mt-2"],[3,"comment","currentUser","isReply","editReplyEvent","deleteReplyEvent","replyEvent",4,"ngFor","ngForOf"],["class","-mt-1 mb-2",4,"ngIf"],[1,"bg-white","border-slate-100","border-2","rounded-lg","p-3"],[1,"flex"],[1,"hidden","md:flex","flex-col","w-11","h-24","justify-between","items-center","bg-slate-100","text-indigo-700","font-bold","px-3","mt-1","mr-3","py-2","rounded-xl"],[1,"cursor-pointer","select-none",3,"click"],["width","11","height","11","xmlns","http://www.w3.org/2000/svg",1,"control-icon"],["d","M6.33 10.896c.137 0 .255-.05.354-.149.1-.1.149-.217.149-.354V7.004h3.315c.136 0 .254-.05.354-.149.099-.1.148-.217.148-.354V5.272a.483.483 0 0 0-.148-.354.483.483 0 0 0-.354-.149H6.833V1.4a.483.483 0 0 0-.149-.354.483.483 0 0 0-.354-.149H4.915a.483.483 0 0 0-.354.149c-.1.1-.149.217-.149.354v3.37H1.08a.483.483 0 0 0-.354.15c-.1.099-.149.217-.149.353v1.23c0 .136.05.254.149.353.1.1.217.149.354.149h3.333v3.39c0 .136.05.254.15.353.098.1.216.149.353.149H6.33Z","fill","#C5C6EF"],[1,"select-none"],[1,"cursor-pointer","mb-1","select-none",3,"click"],["width","11","height","3","xmlns","http://www.w3.org/2000/svg",1,"control-icon"],["d","M9.256 2.66c.204 0 .38-.056.53-.167.148-.11.222-.243.222-.396V.722c0-.152-.074-.284-.223-.395a.859.859 0 0 0-.53-.167H.76a.859.859 0 0 0-.53.167C.083.437.009.57.009.722v1.375c0 .153.074.285.223.396a.859.859 0 0 0 .53.167h8.495Z","fill","#C5C6EF"],[1,"w-full"],[1,"flex","justify-between","items-center"],[1,"flex","justify-start","items-center"],[1,"w-8","mr-4"],["alt","avatar image",1,"w-full","h-auto",3,"src"],[1,"font-bold","text-base","mr-1","max-w-2xs","break-words"],["class","font-bold ml-1 text-base py-0 px-2 bg-indigo-500 text-white rounded",4,"ngIf"],[1,"font-medium","text-slate-500","ml-3"],[1,"hidden","md:block"],["class","flex items-center pr-2 cursor-pointer hover:opacity-70",4,"ngIf"],["class","flex flex-row-reverse pr-2",4,"ngIf"],["class","font-medium text-slate-600 my-3",4,"ngIf"],["placeholder","Add a comment...","name","addComment","id","addComment","rows","3","class","my-3 w-full rounded-md border border-slate-200 hover:border-black p-2 resize-none",3,"ngModel","ngModelChange",4,"ngIf"],["class","flex justify-end",4,"ngIf"],[1,"flex","justify-between","md:hidden"],[1,"flex","justify-between","items-center","bg-slate-100","text-indigo-700","font-bold","px-3","py-2","rounded-xl"],[1,"mr-4","cursor-pointer","select-none",3,"click"],[1,"cursor-pointer","ml-4","select-none",3,"click"],["class","flex flex-row-reverse pr-2 md:hidden",4,"ngIf"],[1,"font-bold","ml-1","text-base","py-0","px-2","bg-indigo-500","text-white","rounded"],[1,"flex","items-center","pr-2","cursor-pointer","hover:opacity-70"],["width","14","height","13","xmlns","http://www.w3.org/2000/svg",1,"mr-2"],["d","M.227 4.316 5.04.16a.657.657 0 0 1 1.085.497v2.189c4.392.05 7.875.93 7.875 5.093 0 1.68-1.082 3.344-2.279 4.214-.373.272-.905-.07-.767-.51 1.24-3.964-.588-5.017-4.829-5.078v2.404c0 .566-.664.86-1.085.496L.227 5.31a.657.657 0 0 1 0-.993Z","fill","#5357B6"],[1,"font-bold","text-indigo-700",3,"click"],[1,"flex","flex-row-reverse","pr-2"],[1,"flex","items-center","cursor-pointer","hover:opacity-70",3,"click"],["width","14","height","14","xmlns","http://www.w3.org/2000/svg",1,"mr-2"],["d","M13.479 2.872 11.08.474a1.75 1.75 0 0 0-2.327-.06L.879 8.287a1.75 1.75 0 0 0-.5 1.06l-.375 3.648a.875.875 0 0 0 .875.954h.078l3.65-.333c.399-.04.773-.216 1.058-.499l7.875-7.875a1.68 1.68 0 0 0-.061-2.371Zm-2.975 2.923L8.159 3.449 9.865 1.7l2.389 2.39-1.75 1.706Z","fill","#5357B6"],[1,"font-bold","text-indigo-700"],[1,"flex","items-center","mr-4","cursor-pointer","hover:opacity-70"],["width","12","height","14","xmlns","http://www.w3.org/2000/svg",1,"mr-2"],["d","M1.167 12.448c0 .854.7 1.552 1.555 1.552h6.222c.856 0 1.556-.698 1.556-1.552V3.5H1.167v8.948Zm10.5-11.281H8.75L7.773 0h-3.88l-.976 1.167H0v1.166h11.667V1.167Z","fill","#ED6368"],[1,"font-bold","text-red-500",3,"click"],[1,"font-medium","text-slate-600","my-3"],["class","font-bold text-indigo-700",4,"ngIf"],["placeholder","Add a comment...","name","addComment","id","addComment","rows","3",1,"my-3","w-full","rounded-md","border","border-slate-200","hover:border-black","p-2","resize-none",3,"ngModel","ngModelChange"],[1,"flex","justify-end"],[1,"px-5","py-3","bg-indigo-500","hover:bg-indigo-500/50","disabled:bg-indigo-500/50","text-white","font-black","rounded-lg",3,"disabled","click"],[1,"flex","flex-row-reverse","pr-2","md:hidden"],[1,"flex","items-center","mr-4","cursor-pointer","hover:opacity-70",3,"click"],[1,"font-bold","text-red-500"],[3,"comment","currentUser","isReply","editReplyEvent","deleteReplyEvent","replyEvent"],[1,"-mt-1","mb-2"],[3,"replyingTo","replyTo","currentUser","replyEvent"]],template:function(t,o){1&t&&(e.YNc(0,G,39,13,"div",0),e.TgZ(1,"div",1),e.YNc(2,K,1,3,"app-single-comment",2),e.qZA(),e.YNc(3,W,2,3,"div",3)),2&t&&(e.Q6J("ngIf",o.comment),e.xp6(2),e.Q6J("ngForOf",o.comment.replies),e.xp6(1),e.Q6J("ngIf",o.replyMode))},directives:[l.O5,c.Fj,c.JJ,c.On,l.sg,n,L],styles:[".control-icon[_ngcontent-%COMP%]:hover   path[_ngcontent-%COMP%]{fill:rgb(79 70 229/var(--tw-text-opacity))}.max-w-2xs[_ngcontent-%COMP%]{max-width:200px}"],changeDetection:0}),n})();function te(n,i){if(1&n&&(e.TgZ(0,"div",9),e._UZ(1,"img",10),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("src",null==t.currentUser||null==t.currentUser.image?null:t.currentUser.image.png,e.LSH)}}function ne(n,i){if(1&n&&(e.TgZ(0,"div",11),e._UZ(1,"img",10),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("src",null==t.currentUser||null==t.currentUser.image?null:t.currentUser.image.png,e.LSH)}}const oe=function(){return{height:"36px",width:"36px","margin-left":"-2px"}};function re(n,i){1&n&&e._UZ(0,"ngx-skeleton-loader",12),2&n&&e.Q6J("theme",e.DdM(1,oe))}let ie=(()=>{class n{constructor(){this.addCommentEvent=new e.vpe}ngOnInit(){}addComment(){this.comment={score:0,createdAt:"Just now",user:this.currentUser,replies:[],content:this.content,id:Math.round(500*(Math.random()+1))},this.addCommentEvent.emit(this.comment),this.content=""}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-comment"]],inputs:{currentUser:"currentUser"},outputs:{addCommentEvent:"addCommentEvent"},decls:11,vars:6,consts:[[1,"bg-white","border-slate-100","border-2","rounded-lg","p-3"],[1,"flex","justify-between"],["class","hidden md:block w-9 mr-3",4,"ngIf"],["placeholder","Add a comment...","name","addComment","id","addComment","rows","3",1,"w-full","rounded-md","border","border-slate-200","hover:border-black","p-2","resize-none",3,"ngModel","ngModelChange"],[1,"hidden","md:block","ml-3","px-8","py-3","h-12","bg-indigo-500","hover:bg-indigo-500/50","disabled:bg-indigo-500/50","text-white","font-black","rounded-lg",3,"disabled","click"],[1,"flex","justify-between","items-center","mt-3"],["class","w-8 md:hidden",4,"ngIf"],["count","1","appearance","circle",3,"theme",4,"ngIf"],[1,"md:hidden","px-8","py-3","bg-indigo-500","hover:bg-indigo-500/50","disabled:bg-indigo-500/50","text-white","font-black","rounded-lg",3,"disabled","click"],[1,"hidden","md:block","w-9","mr-3"],["alt","avatar image",1,"w-full","h-auto",3,"src"],[1,"w-8","md:hidden"],["count","1","appearance","circle",3,"theme"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.YNc(2,te,2,1,"div",2),e.TgZ(3,"textarea",3),e.NdJ("ngModelChange",function(s){return o.content=s}),e.qZA(),e.TgZ(4,"button",4),e.NdJ("click",function(){return o.addComment()}),e._uU(5,"SEND"),e.qZA(),e.qZA(),e.TgZ(6,"div",5),e.YNc(7,ne,2,1,"div",6),e.YNc(8,re,1,2,"ngx-skeleton-loader",7),e.TgZ(9,"button",8),e.NdJ("click",function(){return o.addComment()}),e._uU(10,"SEND"),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngIf",o.currentUser),e.xp6(1),e.Q6J("ngModel",o.content),e.xp6(1),e.Q6J("disabled",!o.currentUser),e.xp6(3),e.Q6J("ngIf",o.currentUser),e.xp6(1),e.Q6J("ngIf",!o.currentUser),e.xp6(1),e.Q6J("disabled",!o.currentUser))},directives:[l.O5,c.Fj,c.JJ,c.On,_],encapsulation:2,changeDetection:0}),n})(),se=(()=>{class n{constructor(){this.modalClosed=new e.vpe}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-delete-modal"]],outputs:{modalClosed:"modalClosed"},decls:19,vars:0,consts:[["aria-labelledby","modal-title","role","dialog","aria-modal","true",1,"fixed","z-10","inset-0","overflow-y-auto"],[1,"flex","items-center","justify-center","min-h-screen","pt-4","px-4","pb-20","text-center","sm:block","sm:p-0"],["aria-hidden","true",1,"fixed","inset-0","bg-gray-700","bg-opacity-75","transition-opacity"],["aria-hidden","true",1,"hidden","sm:inline-block","sm:align-middle","sm:h-screen"],[1,"inline-block","align-bottom","bg-white","rounded-lg","text-left","overflow-hidden","shadow-xl","transform","transition-all","sm:my-8","sm:align-middle","sm:max-w-xs","sm:w-full"],[1,"bg-white","px-4","pt-5","pb-4","sm:p-6","sm:pb-4"],[1,"sm:flex","sm:items-start"],[1,"mt-0","text-left"],["id","modal-title",1,"text-lg","leading-6","font-bold"],[1,"mt-2"],[1,"text-sm","font-medium","text-gray-500"],[1,"bg-gray-50","pb-5","px-6","flex","justify-center"],["type","button",1,"inline-flex","justify-center","rounded-md","border","border-gray-300","shadow-sm","px-4","py-2","bg-white","text-base","text-gray-700","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500","mt-0","w-1/2","text-sm","font-bold",3,"click"],["type","button",1,"inline-flex","justify-center","rounded-md","border","border-transparent","shadow-sm","px-4","py-2","bg-red-400","text-base","text-white","hover:bg-red-600","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-red-500","ml-3","w-1/2","text-sm","font-bold",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"div",2),e.TgZ(3,"span",3),e._uU(4,"\u200b"),e.qZA(),e.TgZ(5,"div",4),e.TgZ(6,"div",5),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e.TgZ(9,"h3",8),e._uU(10,"Delete comment"),e.qZA(),e.TgZ(11,"div",9),e.TgZ(12,"p",10),e._uU(13,"Are you sure you want to delete this comment? this will remove the comment and can't be undone."),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",11),e.TgZ(15,"button",12),e.NdJ("click",function(){return o.modalClosed.emit(!1)}),e._uU(16,"NO, CANCEL"),e.qZA(),e.TgZ(17,"button",13),e.NdJ("click",function(){return o.modalClosed.emit(!0)}),e._uU(18,"YES, DELETE"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA())},encapsulation:2,changeDetection:0}),n})();const le=function(){return{"width.px":42.5,"height.px":96,"border-radius.rem":.75,"margin-top.px":4}},de=function(){return{"width.px":35,"height.px":35}},w=function(){return{height:"35px"}};function ce(n,i){1&n&&(e.TgZ(0,"div",8),e.TgZ(1,"div",9),e.TgZ(2,"div",10),e._UZ(3,"ngx-skeleton-loader",11),e.qZA(),e.TgZ(4,"div",12),e.TgZ(5,"div",13),e.TgZ(6,"div",14),e.TgZ(7,"div",15),e._UZ(8,"ngx-skeleton-loader",16),e.qZA(),e.TgZ(9,"div",17),e._UZ(10,"ngx-skeleton-loader",18),e.qZA(),e.TgZ(11,"div",19),e._UZ(12,"ngx-skeleton-loader",18),e.qZA(),e.qZA(),e.TgZ(13,"div",20),e.TgZ(14,"div",21),e._UZ(15,"ngx-skeleton-loader",18),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"div",6),e._UZ(17,"ngx-skeleton-loader",22),e.TgZ(18,"div",23),e._UZ(19,"ngx-skeleton-loader",18),e.qZA(),e.qZA(),e.TgZ(20,"div",24),e.TgZ(21,"div",25),e._UZ(22,"ngx-skeleton-loader",11),e.qZA(),e.TgZ(23,"div",25),e._UZ(24,"ngx-skeleton-loader",11),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n&&(e.xp6(3),e.Q6J("theme",e.DdM(4,le)),e.xp6(5),e.Q6J("theme",e.DdM(5,de)),e.xp6(14),e.Q6J("theme",e.DdM(6,w)),e.xp6(2),e.Q6J("theme",e.DdM(7,w)))}function me(n,i){if(1&n&&(e.TgZ(0,"div",6),e.YNc(1,ce,25,8,"div",7),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.counter(3))}}function ae(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"app-single-comment",26),e.NdJ("editCommentEvent",function(r){return e.CHM(t),e.oxw().editComment(r)})("deleteCommentEvent",function(r){return e.CHM(t),e.oxw().setToDeleteComment(r)})("deleteReplyEvent",function(r){return e.CHM(t),e.oxw().setToDeleteReply(r)})("replyEvent",function(r){const f=e.CHM(t).$implicit;return e.oxw().reply(r,f)}),e.qZA()}if(2&n){const t=i.$implicit,o=e.oxw();e.Q6J("comment",t)("currentUser",o.currentUser)("isReply",!1)}}function pe(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"app-add-comment",27),e.NdJ("addCommentEvent",function(r){return e.CHM(t),e.oxw().addComment(r)}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("currentUser",t.currentUser)}}function ue(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"app-delete-modal",28),e.NdJ("modalClosed",function(r){return e.CHM(t),e.oxw().onCloseDeleteModal(r)}),e.qZA()}}const ge=[{path:"",component:(()=>{class n{constructor(t){this.facade=t,this.comments=[],this.currentUser=null,this.deleteModalShow=!1,this.replyDeleteMode=!1,this.loading=!0}ngOnInit(){this.setSubscribers(),this.loadCurrentUser(),this.loadComments()}setSubscribers(){this.facade.getComments().pipe(x(1)).subscribe(t=>{this.comments=t,this.sortComments(),this.loading=!1}),this.facade.getCurrentUser$().pipe(x(1)).subscribe(t=>{this.currentUser=t})}loadComments(){this.facade.loadComments()}loadCurrentUser(){this.facade.loadCurrentUser()}counter(t){return new Array(t)}editComment(t){this.facade.editComment(t)}addComment(t){this.facade.addComment(t)}deleteComment(){if(this.replyDeleteMode&&this.commentToDeleteReplyTo&&this.commentToDelete){const t=this.commentToDeleteReplyTo.replies.findIndex(o=>{var r;return o.id===(null===(r=this.commentToDelete)||void 0===r?void 0:r.id)});this.commentToDeleteReplyTo.replies.splice(t,1),this.facade.editComment(this.commentToDeleteReplyTo)}else this.commentToDelete&&this.facade.deleteComment(this.commentToDelete)}showDeleteModal(){this.deleteModalShow=!0}hideDeleteModal(){this.deleteModalShow=!1}setToDeleteComment(t){this.commentToDelete=t,this.commentToDeleteReplyTo=void 0,this.replyDeleteMode=!1,this.showDeleteModal()}setToDeleteReply(t){this.commentToDelete=t[0],this.commentToDeleteReplyTo=t[1],this.replyDeleteMode=!0,this.showDeleteModal()}reply(t,o){t.replyTo=o,this.facade.reply(t)}sortComments(){this.comments.sort((t,o)=>t.score<=o.score?1:-1)}onCloseDeleteModal(t){t&&this.deleteComment(),this.hideDeleteModal()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(q))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-comments"]],decls:7,vars:4,consts:[[1,"flex","justify-center"],[1,"flex","flex-col","items-center","w-full","p-2","scroll-smooth","xl:w-1/2","xl:mt-10"],["class","w-full",4,"ngIf"],["class","w-full my-1",3,"comment","currentUser","isReply","editCommentEvent","deleteCommentEvent","deleteReplyEvent","replyEvent",4,"ngFor","ngForOf"],["class","w-full mt-3 mb-1",3,"currentUser","addCommentEvent",4,"ngIf"],[3,"modalClosed",4,"ngIf"],[1,"w-full"],["class","bg-white w-full border-slate-100 border-2 rounded-lg p-3 my-1",4,"ngFor","ngForOf"],[1,"bg-white","w-full","border-slate-100","border-2","rounded-lg","p-3","my-1"],[1,"flex"],[1,"hidden","md:block","md:w-1/12"],["count","1","appearance","line",3,"theme"],[1,"w-full","md:w-11/12"],[1,"flex","justify-between","items-center"],[1,"flex","content-between","items-center"],[1,"w-6"],["count","1","appearance","circle",1,"w-full",3,"theme"],[1,"w-20","pt-2","ml-7"],["count","1","appearance","line"],[1,"w-24","pt-2","ml-4"],[1,"hidden","md:block"],[1,"w-20","pt-2"],["count","2","appearance","line"],[1,"w-1/2"],[1,"flex","justify-between","md:hidden"],[1,"w-1/4"],[1,"w-full","my-1",3,"comment","currentUser","isReply","editCommentEvent","deleteCommentEvent","deleteReplyEvent","replyEvent"],[1,"w-full","mt-3","mb-1",3,"currentUser","addCommentEvent"],[3,"modalClosed"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.YNc(2,me,2,1,"div",2),e.TgZ(3,"div"),e.YNc(4,ae,1,3,"app-single-comment",3),e.qZA(),e.YNc(5,pe,1,1,"app-add-comment",4),e.qZA(),e.qZA(),e.YNc(6,ue,1,0,"app-delete-modal",5)),2&t&&(e.xp6(2),e.Q6J("ngIf",o.loading),e.xp6(2),e.Q6J("ngForOf",o.comments),e.xp6(1),e.Q6J("ngIf",!o.loading),e.xp6(1),e.Q6J("ngIf",o.deleteModalShow))},directives:[l.O5,l.sg,_,ee,ie,se],encapsulation:2}),n})()}];let _e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[C.Bz.forChild(ge)],C.Bz]}),n})(),fe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[l.ez,_e,D,c.u5]]}),n})()}}]);